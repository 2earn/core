# Test Reports

This directory contains test reports generated by PHPUnit.

## Available Reports

### 1. TestDox HTML Report (`testdox.html`)
A simple HTML report showing test results in a readable format. Generated automatically when running tests.

### 2. JUnit XML Report (`junit.xml`)
XML format test results compatible with CI/CD tools like Jenkins, GitLab CI, etc.

### 3. Enhanced HTML Report (`test-report.html`)
A beautifully styled, comprehensive HTML report built with Laravel Blade and external CSS:
- Overall test statistics dashboard
- Visual success rate progress bar
- Detailed test suite breakdown
- Individual test case results with timing
- Modern, responsive design with animations
- Clean separation of CSS and HTML

## How to Generate Reports

### Using Laravel Command (Recommended)

#### Run Tests and Generate Report (One Command)
```bash
php artisan test:report
```

This single command will:
1. ✅ Run all PHPUnit tests
2. ✅ Generate JUnit XML report
3. ✅ Parse test results
4. ✅ Generate beautiful HTML report using Blade
5. ✅ Show summary in terminal

#### Available Options

**Skip running tests (use existing results):**
```bash
php artisan test:report --skip-tests
```

**Auto-open report in browser:**
```bash
php artisan test:report --open
```

**Combine options:**
```bash
php artisan test:report --skip-tests --open
```

### Manual Method (Old Way)

If you prefer the traditional approach:
```bash
php artisan test
php generate-test-report.php
```

### PowerShell One-Liner
```powershell
php artisan test:report --open
```

## Viewing Reports

### Enhanced HTML Report
Open in your browser:
```
file:///C:/laragon/www/2earn/tests/reports/test-report.html
```

Or use PowerShell:
```powershell
Start-Process "C:\laragon\www\2earn\tests\reports\test-report.html"
```

Or use the command with `--open` flag:
```bash
php artisan test:report --open
```

### TestDox HTML Report
```
file:///C:/laragon/www/2earn/tests/reports/testdox.html
```

## Report Features

### Enhanced HTML Report includes:
- ✅ Total tests count with icon indicators
- ✅ Passed/Failed/Skipped breakdown with color coding
- ✅ Success rate percentage with visual meter
- ✅ Total execution time tracking
- ✅ Animated progress bar (color changes based on success rate)
- ✅ Grouped by test suites with expandable sections
- ✅ Individual test timings and status badges
- ✅ Modern, professional gradient styling
- ✅ Responsive design (mobile, tablet, desktop)
- ✅ Hover effects and smooth transitions
- ✅ Print-friendly layout
- ✅ Built with Laravel Blade templating
- ✅ External CSS file for easy customization

### CSS Customization
The report styles are located at:
```
public/css/test-report.css
```

You can customize colors, fonts, layout, and animations by editing this file.

### Blade Template
The report template is located at:
```
resources/views/test-report.blade.php
```

You can modify the HTML structure and add custom sections as needed.

## Configuration

Reports are configured in `phpunit.xml`:
```xml
<logging>
    <testdoxHtml outputFile="tests/reports/testdox.html"/>
    <junit outputFile="tests/reports/junit.xml"/>
</logging>
```

## Laravel Command Details

**Command:** `test:report`

**Signature:** `php artisan test:report {--skip-tests} {--open}`

**Options:**
- `--skip-tests` : Skip running tests and use existing JUnit XML results
- `--open` : Automatically open the generated report in your default browser

**What it does:**
1. Runs PHPUnit tests (unless `--skip-tests` is used)
2. Parses the JUnit XML report
3. Processes test results and statistics
4. Renders a Blade view with the data
5. Saves the HTML report to `tests/reports/test-report.html`
6. Displays a summary table in the terminal
7. Opens the report in browser (if `--open` flag is used)

## Continuous Integration

The `junit.xml` report can be used in CI/CD pipelines:

### GitLab CI
```yaml
test:
  script:
    - php artisan test:report
  artifacts:
    reports:
      junit: tests/reports/junit.xml
    paths:
      - tests/reports/
```

### GitHub Actions
```yaml
- name: Run tests and generate report
  run: php artisan test:report

- name: Upload test results
  uses: actions/upload-artifact@v3
  if: always()
  with:
    name: test-reports
    path: tests/reports/
```

## Architecture

The test reporting system consists of:

1. **Laravel Command** (`app/Console/Commands/GenerateTestReport.php`)
   - Orchestrates test execution
   - Parses JUnit XML
   - Processes test data
   - Renders Blade view

2. **Blade Template** (`resources/views/test-report.blade.php`)
   - Clean HTML structure
   - Dynamic content rendering
   - Responsive layout
   - Semantic markup

3. **CSS Stylesheet** (`public/css/test-report.css`)
   - Modern gradient design
   - Responsive grid layouts
   - Smooth animations
   - Print-friendly styles
   - Easy to customize

## Notes

- All report files (except `.gitignore` and `README.md`) are gitignored
- Reports are regenerated on every test run
- The enhanced report requires `junit.xml` to be present
- CSS is loaded from `public/css/test-report.css` for easy customization
- Blade template allows for easy modification and extension
- Command provides real-time feedback during execution
