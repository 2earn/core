{
  "info": {
    "name": "2Earn - User Balances API v2",
    "description": "API endpoints for UserBalancesHelper, UserCurrentBalanceVerticalService, and UserCurrentBalanceHorisontalService",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "2earn-api"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost/api/v2",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Horizontal Balances",
      "item": [
        {
          "name": "Get User Horizontal Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}"]
            },
            "description": "Get the complete horizontal balance record for a user"
          },
          "response": []
        },
        {
          "name": "Get Horizontal Balance Field",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/field/cash_balance",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "field", "cash_balance"]
            },
            "description": "Get a specific balance field value (e.g., cash_balance, discount_balance, tree_balance, sms_balance)"
          },
          "response": []
        },
        {
          "name": "Get Cash Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/cash",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "cash"]
            },
            "description": "Get user's cash balance"
          },
          "response": []
        },
        {
          "name": "Get BFSS Balance by Type",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/bfss/type1",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "bfss", "type1"]
            },
            "description": "Get user's BFSS balance by type"
          },
          "response": []
        },
        {
          "name": "Get Discount Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/discount",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "discount"]
            },
            "description": "Get user's discount balance"
          },
          "response": []
        },
        {
          "name": "Get Tree Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/tree",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "tree"]
            },
            "description": "Get user's tree balance"
          },
          "response": []
        },
        {
          "name": "Get SMS Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/sms",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "sms"]
            },
            "description": "Get user's SMS balance"
          },
          "response": []
        },
        {
          "name": "Update Calculated Horizontal Balance",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": \"cash_balance\",\n    \"value\": 1500.50\n}"
            },
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/calculated",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "calculated"]
            },
            "description": "Update a calculated horizontal balance field"
          },
          "response": []
        },
        {
          "name": "Update Balance Field",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"balance_field\": \"share_balance\",\n    \"new_balance\": 250.75\n}"
            },
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/field",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "field"]
            },
            "description": "Update a specific balance field with a new value"
          },
          "response": []
        },
        {
          "name": "Calculate New Balance",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"balance_field\": \"cash_balance\",\n    \"change_amount\": 100.00\n}"
            },
            "url": {
              "raw": "{{base_url}}/user-balances/horizontal/{{user_id}}/calculate",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "horizontal", "{{user_id}}", "calculate"]
            },
            "description": "Calculate new balance after applying a change amount (positive or negative)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Vertical Balances",
      "item": [
        {
          "name": "Get Vertical Balance by Type",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/vertical/{{user_id}}/1",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "vertical", "{{user_id}}", "1"]
            },
            "description": "Get user's vertical balance record by balance type ID (1=CASH, 2=BFSS, 3=DISCOUNT, 4=TREE, 5=SMS, etc.)"
          },
          "response": []
        },
        {
          "name": "Get All Vertical Balances",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/user-balances/vertical/{{user_id}}/all",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "vertical", "{{user_id}}", "all"]
            },
            "description": "Get all vertical balance records for a user"
          },
          "response": []
        },
        {
          "name": "Update Vertical Balance After Operation",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"balance_id\": 1,\n    \"balance_change\": 50.00,\n    \"last_operation_id\": 123,\n    \"last_operation_value\": 50.00,\n    \"last_operation_date\": \"2026-02-09 10:30:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/user-balances/vertical/{{user_id}}/update-after-operation",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "vertical", "{{user_id}}", "update-after-operation"]
            },
            "description": "Update vertical balance after a balance operation, tracking operation history"
          },
          "response": []
        },
        {
          "name": "Update Calculated Vertical Balance",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": 1,\n    \"value\": 500.00\n}"
            },
            "url": {
              "raw": "{{base_url}}/user-balances/vertical/{{user_id}}/calculated",
              "host": ["{{base_url}}"],
              "path": ["user-balances", "vertical", "{{user_id}}", "calculated"]
            },
            "description": "Update a calculated vertical balance by balance type ID or BalanceEnum"
          },
          "response": []
        }
      ]
    }
  ]
}

